; PlatformIO Project Configuration File
;
; Mate Tracker ESP32-C3 Firmware
; Hosts the Mate Service web application on ESP32-C3
;

[env:esp32c3]
platform = espressif32
board = esp32-c3-devkitm-1
framework = arduino
monitor_speed = 115200
upload_speed = 921600

; LittleFS for file system
board_build.filesystem = littlefs

; Partition scheme with enough space for LittleFS
board_build.partitions = default.csv

; Library dependencies
lib_deps = 
    me-no-dev/ESPAsyncWebServer @ ^1.2.3
    me-no-dev/AsyncTCP @ ^1.1.1
    bblanchon/ArduinoJson @ ^6.21.3

; Build flags
build_flags = 
    -DASYNCWEBSERVER_REGEX
    -DCORE_DEBUG_LEVEL=3

; ============================================
; Test Environment
; ============================================
[env:esp32c3_test]
platform = espressif32
board = esp32-c3-devkitm-1
framework = arduino
monitor_speed = 115200
upload_speed = 921600
upload_port = /dev/cu.usbserial-110
test_port = /dev/cu.usbserial-110

; Test framework configuration
test_framework = unity
test_build_src = no

; Library dependencies for tests
lib_deps = 
    me-no-dev/ESPAsyncWebServer @ ^1.2.3
    me-no-dev/AsyncTCP @ ^1.1.1
    bblanchon/ArduinoJson @ ^6.21.3

; Build flags for tests
build_flags = 
    -DASYNCWEBSERVER_REGEX
    -DCORE_DEBUG_LEVEL=0
    -DUNIT_TEST
